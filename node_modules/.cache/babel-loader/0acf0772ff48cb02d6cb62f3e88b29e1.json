{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mohidinhassan/movie_website_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mohidinhassan/movie_website_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mohidinhassan/movie_website_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import Search from\"../../components/Search\";import{Link}from\"react-router-dom\";import\"../../components/Search/Search.css\";import{Movie_API}from\"../../api/Movie_API\";import MovieList from\"../../components/Movies/MovieList\";var KEY=process.env.REACT_APP_API;var Home=function Home(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],getList=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var totalPages=useRef(0);var nextPage=function nextPage(){setPage(page+1);if(page===totalPages.current){setPage(totalPages.current);}};var lastPage=function lastPage(){setPage(totalPages.current);};var prevPage=function prevPage(){setPage(page-1);};var firstPage=function firstPage(){setPage(1);};useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(query===\"\")){_context.next=4;break;}getList([]);_context.next=15;break;case 4:_context.prev=4;_context.next=7;return Movie_API.Search.get(\"/search/movie\",{params:{api_key:KEY,language:\"en-US\",include_adult:\"false\",page:page,query:query}});case 7:response=_context.sent;totalPages.current=response.data.total_pages;if(totalPages.current>=page){getList(response.data.results);}else{alert(\"end of page\");getList([]);}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](4);console.warn(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[4,12]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[query,page]);var onTermSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(q){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setQuery(q);setPage(1);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function onTermSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",{style:{justifyContent:\"center\",display:\"flex\",flexDirection:\"row\"}},/*#__PURE__*/React.createElement(\"h1\",null,\"The Movie Hub\"),/*#__PURE__*/React.createElement(\"i\",{style:{marginLeft:\"10px\",marginTop:\"15px\"},className:\"fas fa-film fa-3x\"})),/*#__PURE__*/React.createElement(Search,{onFormSubmit:onTermSubmit}),/*#__PURE__*/React.createElement(MovieList,{movies:list,isLoggedIn:props.loggedin,userID:props.user}),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',flexDirection:'row',justifyContent:'center',margin:'30px'}},list.length===0||page===totalPages.current?null:/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-arrow-right fa-2x\",style:{fontSize:'larger',margin:'5%',cursor:'pointer'},onClick:nextPage,disabled:page===totalPages.current},\"Next Page\"),\" \",/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-double-right fa-2x\",style:{fontSize:'larger',margin:'5%',cursor:'pointer'},onClick:lastPage,disabled:page===totalPages.current},\"Last Page\"),\"   \"),page>1?/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-arrow-left fa-2x\",style:{fontSize:'larger',margin:'5%',cursor:'pointer'},onClick:prevPage},\"Previous Page\"),\" \",/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-double-left fa-2x\",style:{fontSize:'larger',margin:'5%',cursor:'pointer'},onClick:firstPage,disabled:page===totalPages.current},\"First Page\"),\" \"):null),list.length===0?null:/*#__PURE__*/React.createElement(\"h3\",{style:{textAlign:'center'}},\"Page \",page,\" / \",totalPages.current),/*#__PURE__*/React.createElement(\"div\",{className:\"filter\"},/*#__PURE__*/React.createElement(Link,{to:\"/filter\"},/*#__PURE__*/React.createElement(\"button\",{className:\"filter-button\"},\"Discover One!\")))));};export default Home;","map":{"version":3,"sources":["/Users/mohidinhassan/movie_website_app/src/Pages/Home/index.js"],"names":["React","useState","useEffect","useRef","Search","Link","Movie_API","MovieList","KEY","process","env","REACT_APP_API","Home","props","list","getList","query","setQuery","page","setPage","totalPages","nextPage","current","lastPage","prevPage","firstPage","fetchData","get","params","api_key","language","include_adult","response","data","total_pages","results","alert","console","warn","onTermSubmit","q","justifyContent","display","flexDirection","marginLeft","marginTop","loggedin","user","margin","length","textAlign","fontSize","cursor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Search from \"../../components/Search\";\nimport { Link } from \"react-router-dom\";\n\nimport \"../../components/Search/Search.css\";\nimport { Movie_API } from \"../../api/Movie_API\";\nimport MovieList from \"../../components/Movies/MovieList\";\nconst KEY = process.env.REACT_APP_API;\n\nconst Home = (props) => {\n  const [list, getList] = useState([]);\n  const [query, setQuery] = useState(\"\");\n  const [page, setPage] = useState(1)\n  const totalPages = useRef(0)\n\n  \n  const nextPage = () => {\n      setPage(page + 1)\n      if(page === totalPages.current){\n        setPage(totalPages.current)\n      }\n  }\n\n  const lastPage = () => {\n    setPage(totalPages.current)\n    \n}\n\n  const prevPage = () => {\n    setPage(page - 1)\n  }\n\n  const firstPage = () => {\n    setPage(1)\n    \n}\n  \n\n  useEffect(() => {\n    const fetchData = async () => {\n      if (query === \"\") {\n        getList([]);\n      } else {\n        try {\n           const response = await Movie_API.Search.get(\"/search/movie\", {\n            params: {\n              api_key: KEY,\n              language: \"en-US\",\n              include_adult: \"false\",\n              page: page,\n              query: query,\n            },\n          });\n          totalPages.current = response.data.total_pages\n          \n          if(totalPages.current >= page){\n          getList(response.data.results);\n          }else{\n            alert(\"end of page\")\n            getList([])\n          }\n        } catch (err) {\n          console.warn(err);\n          \n        }\n      }\n    };\n    fetchData();\n\n    \n  }, [query, page]);\n\n  const onTermSubmit = async (q) => {\n    setQuery(q);\n    setPage(1)\n  };\n\n  return (\n    <>\n      <>\n        <span\n          style={{\n            justifyContent: \"center\",\n            display: \"flex\",\n            flexDirection: \"row\",\n          }}\n        >\n          <h1>The Movie Hub</h1>\n          <i\n            style={{ marginLeft: \"10px\", marginTop: \"15px\" }}\n            className=\"fas fa-film fa-3x\"\n          ></i>\n        </span>\n        <Search onFormSubmit={onTermSubmit} />\n        <MovieList movies={list} isLoggedIn = {props.loggedin} userID = {props.user}/>\n        <div style={{display:'flex', flexDirection:'row', justifyContent:'center', margin:'30px'}}>\n          {list.length === 0 || page === totalPages.current ? null : <div style={{textAlign:'center'}}><i className=\"fas fa-arrow-right fa-2x\" style={{  fontSize:'larger' ,margin: '5%', cursor:'pointer'}} onClick={nextPage} disabled={page === totalPages.current}>Next Page</i> <i className=\"fas fa-angle-double-right fa-2x\" style={{fontSize:'larger',margin: '5%', cursor:'pointer'}} onClick={lastPage} disabled={page === totalPages.current}>Last Page</i>   </div> }\n          {page > 1 ? <div style={{textAlign:'center'}}><i className=\"fas fa-arrow-left fa-2x\" style={{fontSize:'larger',margin: '5%', cursor:'pointer'}}  onClick={prevPage}>Previous Page</i> <i className=\"fas fa-angle-double-left fa-2x\" style={{fontSize:'larger',margin: '5%', cursor:'pointer'}} onClick={firstPage} disabled={page === totalPages.current}>First Page</i> </div> : null }\n        </div>\n        {list.length === 0 ? null : <h3 style={{textAlign:'center'}}>Page {page} / {totalPages.current}</h3>}\n\n        <div className=\"filter\">\n          <Link to={\"/filter\"}>\n            <button className=\"filter-button\">Discover One!</button>\n          </Link>\n        </div>\n      </>\n    </>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}