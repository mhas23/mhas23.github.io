{"ast":null,"code":"import _classCallCheck from\"/Users/mohidinhassan/movie_website_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mohidinhassan/movie_website_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mohidinhassan/movie_website_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mohidinhassan/movie_website_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import\"./Movies.scss\";import{Link}from\"react-router-dom\";import Favorite from'./Favorite';import{withFirebase}from'../firebase';var newID;var MovieCard=/*#__PURE__*/function(_React$Component){_inherits(MovieCard,_React$Component);var _super=_createSuper(MovieCard);function MovieCard(){var _this;_classCallCheck(this,MovieCard);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={favorite:false,favoriteList:[]};_this.handleFavs=function(props){var found=_this.state.favoriteList.some(function(el){return el.id===props.movie[0].id;});if(!found){_this.setState({favorite:true});//arr.push({id: props.movie[0].id, title: props.movie[0].title, poster_path: props.movie[0].poster_path, favorite: true, release_date: props.movie[0].release_date})\nif(!_this.props.firebase.auth.currentUser.isAnonymous){newID.push({id:props.movie[0].id,title:props.movie[0].title,poster_path:props.movie[0].poster_path,favorite:true,release_date:props.movie[0].release_date});}}else{if(window.confirm(\"Remove \\\"\".concat(props.movie[0].title,\"\\\" from Favorites?\"))){_this.setState({favorite:false});newID.once(\"value\",function(snap){snap.forEach(function(child){if(props.movie[0].id===child.val().id){_this.props.firebase.childItems(child.key,_this.props.userID);}});});}}/*\n  if(arr.includes(...props.movie)){\n    const fav = arr.indexOf(...props.movie)\n    arr.splice(fav, 1)\n    localStorage.setItem(\"favoriteList\", JSON.stringify(arr))\n  }else{\n    props.movie.map((index, key) => {\n        arr.push(...props.movie)\n        this.setState({\n          favorites: arr\n        })\n      }\n    )\n  }\n  */};return _this;}_createClass(MovieCard,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.mount=true;newID=this.props.firebase.item(this.props.userID);newID.on(\"value\",function(snap){var array=[];snap.forEach(function(child){array.push({id:child.val().id,title:child.val().title,poster_path:child.val().poster_path,favorite:true,release_date:child.val().release_date});});if(_this2.mount){_this2.setState({favoriteList:array});}});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.mount=false;}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\" movie-info\"/*style={{display:'flex',flexDirection:'column-reverse'}} */},/*#__PURE__*/React.createElement(Link,{to:\"/info/\".concat(this.props.id,\"/\").concat(encodeURIComponent(this.props.title))},/*#__PURE__*/React.createElement(\"img\",{src:this.props.image,style:{width:\"100%\"},alt:\"Movie\"}))),/*#__PURE__*/React.createElement(Favorite,{key:this.props.id,id:this.props.id,title:this.props.title,release_date:this.props.release_date,img:this.props.image,handleFav:this.handleFavs,isLoggedIn:this.props.isLoggedIn,userID:this.props.userID}));}}]);return MovieCard;}(React.Component);export default withFirebase(MovieCard);","map":{"version":3,"sources":["/Users/mohidinhassan/movie_website_app/src/components/Movies/MovieCard.js"],"names":["React","Link","Favorite","withFirebase","newID","MovieCard","state","favorite","favoriteList","handleFavs","props","found","some","el","id","movie","setState","firebase","auth","currentUser","isAnonymous","push","title","poster_path","release_date","window","confirm","once","snap","forEach","child","val","childItems","key","userID","mount","item","on","array","encodeURIComponent","image","width","isLoggedIn","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./Movies.scss\";\nimport { Link } from \"react-router-dom\";\nimport Favorite from './Favorite'\nimport {withFirebase} from '../firebase'\n\nlet newID\n\n\nclass MovieCard extends React.Component {\n\n  \n  state = {\n    favorite: false,\n    favoriteList: []\n  }\n\n  componentDidMount(){\n     this.mount = true\n  \n    newID  = this.props.firebase.item(this.props.userID)\n \n  newID.on(\"value\", snap => {\n     let array = []\n     snap.forEach((child) => {\n          array.push({id: child.val().id, title: child.val().title, poster_path: child.val().poster_path, favorite: true, release_date: child.val().release_date})\n     })\n     if(this.mount){\n    this.setState({favoriteList: array})\n     }\n\n  })\n}\n\n \n\n componentWillUnmount(){\n  this.mount = false\n }\n\n  \nhandleFavs = (props) => {\n  \n  const found = this.state.favoriteList.some(el => el.id === props.movie[0].id)\n  \n    if (!found){\n      this.setState({\n        favorite: true\n      })\n      \n      //arr.push({id: props.movie[0].id, title: props.movie[0].title, poster_path: props.movie[0].poster_path, favorite: true, release_date: props.movie[0].release_date})\n      if(!this.props.firebase.auth.currentUser.isAnonymous){\n      newID.push({id: props.movie[0].id, title: props.movie[0].title, poster_path: props.movie[0].poster_path, favorite: true, release_date: props.movie[0].release_date})\n\n    }\n  }\n  else{\n\n    if(window.confirm(`Remove \"${props.movie[0].title}\" from Favorites?`)){\n\n        this.setState({\n          favorite: false\n        })\n      \n        newID.once(\"value\", snap => {\n        snap.forEach(child => {\n          if(props.movie[0].id === child.val().id){\n            this.props.firebase.childItems(child.key, this.props.userID)\n          }\n        })\n      })\n\n\n  }\n}\n  /*\n  if(arr.includes(...props.movie)){\n    const fav = arr.indexOf(...props.movie)\n    arr.splice(fav, 1)\n    localStorage.setItem(\"favoriteList\", JSON.stringify(arr))\n  }else{\n    props.movie.map((index, key) => {\n        arr.push(...props.movie)\n        this.setState({\n          favorites: arr\n        })\n      }\n    )\n  }\n  */\n\n\n}\n\n\n\n\n\nrender(){\n  \n  \n\n  return (\n    <>\n      \n      <div\n        className=\" movie-info\" /*style={{display:'flex',flexDirection:'column-reverse'}} */\n      >\n        <Link to={`/info/${this.props.id}/${encodeURIComponent(this.props.title)}`}>\n          <img src={this.props.image} style={{ width: \"100%\" }} alt=\"Movie\" />\n            \n        </Link>\n      </div>  \n         <Favorite key={this.props.id} id={this.props.id} title={this.props.title} release_date={this.props.release_date} img={this.props.image} handleFav={this.handleFavs} isLoggedIn={this.props.isLoggedIn} userID={this.props.userID}/>\n    </>\n  );\n}\n}\n\nexport default withFirebase(MovieCard);\n"]},"metadata":{},"sourceType":"module"}